var u=Object.defineProperty;var m=(s,a,t)=>a in s?u(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var r=(s,a,t)=>(m(s,typeof a!="symbol"?a+"":a,t),t);import{B as _,P as d,L as i}from"./BaseDemo-21616005.js";const o=""+new URL("progress_bar_ske-e52fd537.json",import.meta.url).href,h=""+new URL("progress_bar_tex-69e27e4b.json",import.meta.url).href,l=""+new URL("progress_bar_tex-160e69bb.png",import.meta.url).href;class p extends _{constructor(){super();r(this,"_armatureDisplay",null);r(this,"_isTouched",!1);this._resources.push(o,h,l)}_onStart(){const t=d.factory;if(t.parseDragonBonesData(this._pixiResources[o].data),t.parseTextureAtlasData(this._pixiResources[h].data,this._pixiResources[l].texture),this._armatureDisplay=t.buildArmatureDisplay("progress_bar"),this._armatureDisplay===null)throw new Error("this._armatureDisplay is null.");this._armatureDisplay.x=0,this._armatureDisplay.y=0,this.addChild(this._armatureDisplay),this._armatureDisplay.on(i.START,this._animationEventHandler,this),this._armatureDisplay.on(i.LOOP_COMPLETE,this._animationEventHandler,this),this._armatureDisplay.on(i.COMPLETE,this._animationEventHandler,this),this._armatureDisplay.on(i.FADE_IN,this._animationEventHandler,this),this._armatureDisplay.on(i.FADE_IN_COMPLETE,this._animationEventHandler,this),this._armatureDisplay.on(i.FADE_OUT,this._animationEventHandler,this),this._armatureDisplay.on(i.FADE_OUT_COMPLETE,this._animationEventHandler,this),this._armatureDisplay.on(i.FRAME_EVENT,this._animationEventHandler,this),this._armatureDisplay.animation.play("idle"),this.interactive=!0,this.addListener("touchstart",this._touchHandler,this),this.addListener("touchend",this._touchHandler,this),this.addListener("touchmove",this._touchHandler,this),this.addListener("mousedown",this._touchHandler,this),this.addListener("mouseup",this._touchHandler,this),this.addListener("mousemove",this._touchHandler,this),this.createText("Touch to control animation play progress.")}_touchHandler(t){const n=Math.min(Math.max((t.data.global.x-this.x+300)/600,0),1);if(this._armatureDisplay===null)throw new Error("this._armatureDisplay is null.");switch(t.type){case"touchstart":case"mousedown":this._isTouched=!0,this._armatureDisplay.animation.gotoAndStopByProgress("idle",n);break;case"touchend":case"mouseup":this._isTouched=!1,this._armatureDisplay.animation.play();break;case"touchmove":case"mousemove":if(this._isTouched){const e=this._armatureDisplay.animation.getState("idle");e&&(e.currentTime=e.totalTime*n)}break}}_animationEventHandler(t){if(t.animationState===null)throw new Error("event.animationState is null.");console.log(t.animationState.name,t.type,t.name)}}new p;
