var P=Object.defineProperty;var y=(i,a,t)=>a in i?P(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t;var h=(i,a,t)=>(y(i,typeof a!="symbol"?a+"":a,t),t);import{B as d,l as A,P as x}from"./BaseDemo-21616005.js";const c=""+new URL("shizuku_ske-723db58d.json",import.meta.url).href,m=""+new URL("texture_00-f19d0e51.png",import.meta.url).href,p=""+new URL("texture_01-a6ab9e76.png",import.meta.url).href,R=""+new URL("texture_02-5def455b.png",import.meta.url).href,D=""+new URL("texture_03-066d38c2.png",import.meta.url).href;class M extends d{constructor(){super();h(this,"_scale",.3);h(this,"_target",new A.Point);h(this,"_animationNames",["PARAM_ANGLE_X","PARAM_ANGLE_Y","PARAM_ANGLE_Z","PARAM_EYE_BALL_X","PARAM_EYE_BALL_Y","PARAM_BODY_X","PARAM_BODY_Y","PARAM_BODY_Z","PARAM_BODY_ANGLE_X","PARAM_BODY_ANGLE_Y","PARAM_BODY_ANGLE_Z","PARAM_BREATH"]);h(this,"_armatureDisplay",null);this._resources.push(c,m,p,R,D)}_onStart(){const t=x.factory;if(t.parseDragonBonesData(this._pixiResources[c].data,"shizuku"),t.updateTextureAtlases([this._pixiResources[m].texture,this._pixiResources[p].texture,this._pixiResources[R].texture,this._pixiResources[D].texture],"shizuku"),this._armatureDisplay=t.buildArmatureDisplay("shizuku","shizuku"),this._armatureDisplay===null)throw new Error("this._armatureDisplay is null.");this._armatureDisplay.animation.play("idle_00"),this._armatureDisplay.x=0,this._armatureDisplay.y=200,this._armatureDisplay.scale.set(this._scale),this.addChild(this._armatureDisplay),this.interactive=!0,this.addListener("touchmove",this._touchHandler,this),this.addListener("mousemove",this._touchHandler,this),A.ticker.shared.add(this._enterFrameHandler,this)}_touchHandler(t){this._setTarget(t.data.global.x,t.data.global.y)}_setTarget(t,r){if(this._armatureDisplay===null)throw new Error("this._armatureDisplay is null.");this._target.x+=((t-this.x-this._armatureDisplay.x)/this._scale-this._target.x)*.3,this._target.y+=((r-this.y-this._armatureDisplay.y)/this._scale-this._target.y)*.3}_enterFrameHandler(t){if(this._armatureDisplay===null)throw new Error("this._armatureDisplay is null.");const r=this._armatureDisplay.armature,o=this._armatureDisplay.animation,_=r.armatureData.canvas;if(_===null)throw new Error("canvas is null.");let e=0;const n=Math.max(Math.min((this._target.x-_.x)/(_.width*.5),1),-1),l=-Math.max(Math.min((this._target.y-_.y)/(_.height*.5),1),-1);for(const u of this._animationNames){if(!o.hasAnimation(u))continue;let s=o.getState(u,1);if(s||(s=o.fadeIn(u,.1,1,1,u),s&&(s.resetToPose=!1,s.stop())),!!s){if(r.clock===null)throw new Error("armature.clock is null.");switch(u){case"PARAM_ANGLE_X":case"PARAM_EYE_BALL_X":e=(n+1)*.5;break;case"PARAM_ANGLE_Y":case"PARAM_EYE_BALL_Y":e=(l+1)*.5;break;case"PARAM_ANGLE_Z":e=(-n*l+1)*.5;break;case"PARAM_BODY_X":case"PARAM_BODY_ANGLE_X":e=(n+1)*.5;break;case"PARAM_BODY_Y":case"PARAM_BODY_ANGLE_Y":e=(-n*l+1)*.5;break;case"PARAM_BODY_Z":case"PARAM_BODY_ANGLE_Z":e=(-n*l+1)*.5;break;case"PARAM_BREATH":e=(Math.sin(r.clock.time)+1)*.5;break}s.currentTime=e*s.totalTime}}}}new M;
